
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Ambari 설치 중 이슈 정리 · GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.0">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../etc/programming-3-law.html" />
    
    
    <link rel="prev" href="ambari-agent-install.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">윈도우에서 개발환경 구성하기</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../docker/docker-on-windows10.html">
            
                <a href="../docker/docker-on-windows10.html">
            
                    
                    윈도우10에서 도커설치하기
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../gitbook/gitbook-on-docker.html">
            
                <a href="../gitbook/gitbook-on-docker.html">
            
                    
                    도커로 GitBook 구성하기
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../etc/Chocolatey.html">
            
                <a href="../etc/Chocolatey.html">
            
                    
                    Chocolatey
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Java</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../java/java-8-stream-api.html">
            
                <a href="../java/java-8-stream-api.html">
            
                    
                    Java 8 Stream API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../java/url&uri_encoder.html">
            
                <a href="../java/url&uri_encoder.html">
            
                    
                    URL 인코딩에 관하여
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Spring</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../spring/Spring-AutoConfiguration.html">
            
                <a href="../spring/Spring-AutoConfiguration.html">
            
                    
                    AutoConfiguration 설정과 원리
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../spring/swagger-ui.html">
            
                <a href="../spring/swagger-ui.html">
            
                    
                    Spring Boot + Swagger 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../spring/swagger-aggregation.html">
            
                <a href="../spring/swagger-aggregation.html">
            
                    
                    Swagger Aggregation
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">ElasticSearch</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../elasticsearch/elasticsearch-disadvantage.html">
            
                <a href="../elasticsearch/elasticsearch-disadvantage.html">
            
                    
                    elasticsearch 단점
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../elasticsearch/fielddata-and-doc_value.html">
            
                <a href="../elasticsearch/fielddata-and-doc_value.html">
            
                    
                    fielddata와 doc_value 이해하기
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">RxJava</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../rxjava/reactive-programming.html">
            
                <a href="../rxjava/reactive-programming.html">
            
                    
                    Reactive Programming 정리
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Hadoop</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="ambari-agent-install.html">
            
                <a href="ambari-agent-install.html">
            
                    
                    Ambari Agent 설치
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="7.2" data-path="ambari-install-issue.html">
            
                <a href="ambari-install-issue.html">
            
                    
                    Ambari 설치 중 이슈 정리
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">etc</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../etc/programming-3-law.html">
            
                <a href="../etc/programming-3-law.html">
            
                    
                    프로그래밍 관련 원칙
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="../docker/github-packages-for-docker.html">
            
                <a href="../docker/github-packages-for-docker.html">
            
                    
                    GitHub Packages Registry For Docker
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Ambari 설치 중 이슈 정리</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="ambari---client-server-&#xC124;&#xCE58;-&#xACFC;&#xC815;-&#xC911;-&#xC774;&#xC288;-&#xD574;&#xACB0;">Ambari - Client Server &#xC124;&#xCE58; &#xACFC;&#xC815; &#xC911; &#xC774;&#xC288; &#xD574;&#xACB0;</h2><hr><h2 id="index">INDEX</h2><ol><li><p><a href="#transparent-huge-pages-issues">Transparent Huge Pages Issues</a></p></li>
<li><p><a href="#service-issues">Service Issues</a></p></li>
<li><p><a href="hostname-resolution-issues">Hostname Resolution Issues</a></p></li></ol>
<hr><h3 id="transparent-huge-pages-issues">Transparent Huge Pages Issues</h3><p>The following hosts have Transparent Huge Pages (THP) enabled. THP should be disabled to avoid potential Hadoop performance issues.  --&gt;  <b>&apos;THP disable.&apos;</b></p><ul><li><p>THP&#xB780;? Transparent Huge Pages&#xC758; &#xC57D;&#xC790;.  &#xC790;&#xC138;&#xD55C; &#xB0B4;&#xC6A9;&#xC740; <a href="http://allthatlinux.com/dokuwiki/doku.php?id=thp_transparent_huge_pages_%EA%B8%B0%EB%8A%A5%EA%B3%BC_%EC%84%A4%EC%A0%95_%EB%B0%A9%EB%B2%95" target="_blank">http://allthatlinux.com/dokuwiki/doku.php?id=thp_transparent_huge_pages_%EA%B8%B0%EB%8A%A5%EA%B3%BC_%EC%84%A4%EC%A0%95_%EB%B0%A9%EB%B2%95</a> &#xCC38;&#xACE0;.</p></li>
<li><p>THP &#xC635;&#xC158; &#xD65C;&#xC131;&#xD654; &#xC5EC;&#xBD80; &#xD655;&#xC778; &#xBC29;&#xBC95;</p><ul><li><p>&#xC124;&#xC815; &#xC5EC;&#xBD80; &#xD655;&#xC778;</p><pre><code class="lang-sh">cat /sys/kernel/mm/transparent_hugepage/enabled

&gt;&gt; [always] madvise never <span class="hljs-comment">#&#xD65C;&#xC131;&#xD654;&#xB41C; &#xC0C1;&#xD0DC;</span>
&gt;&gt; always madvise [never] <span class="hljs-comment">#&#xBE44;&#xD65C;&#xC131;&#xD654;&#xB41C; &#xC0C1;&#xD0DC;</span></code></pre>
<ul><li>&#xBA54;&#xBAA8;&#xB9AC; &#xD655;&#xC778;
</li></ul>
<pre><code class="lang-shell">cat /proc/meminfo

#&#xC544;&#xB798; &#xD56D;&#xBAA9;&#xB4E4;&#xC774; &#xBAA8;&#xB450; 0&#xC774;&#xC5B4;&#xC57C; &#xBE44;&#xD65C;&#xC131;&#xD654;&#xB41C; &#xC0C1;&#xD0DC;. -&gt; &#xC544;&#xB798; &#xCD9C;&#xB825; &#xC608;&#xC2DC;&#xB294; &#xD65C;&#xC131;&#xD654;&#xC0C1;&#xD0DC;&#xC784;.
AnonHugePages:    598016 kB
HugePages_Total:       0
HugePages_Free:        0
HugePages_Rsvd:        0
HugePages_Surp:        0</code></pre>
<!--THP 비활성화 후 재부팅하고 다시 메모리 확인했을 때, AnonHugePages의 크기는 확연히 줄었으나 완전히 0kb로는 내려가지않았다... -->


</li></ul>
</li></ul>
<ul><li><p>THP &#xC635;&#xC158; &#xBE44;&#xD65C;&#xC131;&#xD654;</p><pre><code class="lang-shell">sudo apt-get install hugepages
sudo hugeadm --thp-never
#&#xC7AC;&#xBD80;&#xD305;&#xD6C4;&#xC5D0; &#xD574;&#xB2F9; &#xC124;&#xC815;&#xC774; &#xC720;&#xC9C0;&#xB418;&#xC9C0; &#xC54A;&#xAE30;&#xB54C;&#xBB38;&#xC5D0; &apos;/etc/rc.local&apos;&#xC5D0; &#xB2E4;&#xC74C;&#xC744; &#xCD94;&#xAC00;&#xD574;&#xC900;&#xB2E4;.
sudo /bin/sed -i &apos;$i /usr/bin/hugeadm --thp-never&apos; /etc/rc.local</code></pre>
<!--rc.local파일은 부팅시 자동 실행명령어 스크립트이다. 서버 부팅시마다 매번 자동 실행되길 원하는 명령어는 rc.local에 넣어준다.-->


</li></ul>
<hr><h2 id="service-issues">Service Issues</h2><p>The following services should be up <code>ntp or chrony</code> --&gt; <b>&#xD574;&#xB2F9; &#xC11C;&#xBE44;&#xC2A4; &#xC2E4;&#xD589;</b></p><ul><li><b>ntp</b> : Network Time Protocol&#xC758; &#xC57D;&#xC790;,  &#xC778;&#xD130;&#xB137;&#xC0C1;&#xC758; &#xC2DC;&#xAC04;&#xC744; &#xC815;&#xD655;&#xD558;&#xAC8C; &#xC720;&#xC9C0;&#xC2DC;&#xCF1C; &#xC8FC;&#xAE30; &#xC704;&#xD55C; &#xD1B5;&#xC2E0;&#xB9DD; &#xC2DC;&#xAC04; &#xADDC;&#xC57D;
</li>
<li><p><b>chrony</b> : RHEL 7&#xC5D0;&#xC11C; &#xAE30;&#xBCF8;&#xC73C;&#xB85C; &#xC81C;&#xACF5;&#xD558;&#xB294; <strong>NTP daemon/client</strong></p></li>
<li><p>&#xC2DC;&#xAC04; &#xB3D9;&#xAE30;&#xD654; &#xD655;&#xC778; : <code>NTP synchronized: yes</code>&#xB85C; &#xB418;&#xC5B4;&#xC788;&#xC5B4;&#xC57C; &#xB3D9;&#xAE30;&#xD654; &#xC124;&#xC815; &#xB418;&#xC5B4; &#xC788;&#xB294; &#xAC83;&#xC784;.</p><pre><code class="lang-shell">timedatectl

&gt;&gt; Local time: &#xC6D4; 2019-03-04 22:54:30 KST
  Universal time: &#xC6D4; 2019-03-04 13:54:30 UTC
        RTC time: &#xC6D4; 2019-03-04 13:54:18
       Time zone: Asia/Seoul (KST, +0900)
 Network time on: yes
NTP synchronized: yes</code></pre>
</li></ul>
<ul><li><p>NTP &#xC124;&#xCE58;</p><pre><code class="lang-shell">sudo apt-get install ntp</code></pre>
<ul><li>NTP &#xD655;&#xC778;
</li></ul>
<pre><code class="lang-shell">ntpq -p</code></pre>
<ul><li>NTP &#xC124;&#xC815;
</li></ul>
<pre><code class="lang-shell">sudo vi /etc/ntp.conf

#&#xC544;&#xB798; &#xB0B4;&#xC6A9; &#xCD94;&#xAC00;?
server 1.kr.pool.ntp.org 
server 1.asia.pool.ntp.org 
server time.bora.net</code></pre>
</li></ul>
<h2 id="hostname-resolution-issues">Hostname Resolution Issues</h2><p>Not all hosts could resolve hostnames of other hosts. Make sure that host resolution works properly on all hosts before continuing.  --&gt; <b>&#xB2E4;&#xB978; &#xC11C;&#xBC84;&#xC5D0;&#xB3C4; &#xCD94;&#xAC00;&#xD558;&#xB824;&#xB294; &#xC11C;&#xBC84; &#xD638;&#xC2A4;&#xD2B8; &#xCD94;&#xAC00;</b></p><!-- hosts파일에 추가하려는 서버 추가하고 다시 체크해봐도 해결 상태로 넘어가지 않는다. 해당 이슈를 해결하지 않고 설치 진행한 결과 아무 이상은 없었다. 그래도 혹시 몰라 리서치를 해본 결과, ambari 서버를 재시작해보라는 답변을 찾았다...-->


<h2 id="hive-start-failed-because-of-ambari-error-mysql-connector-javajar-due-to-http-error-http-error-404-not-found">Hive start failed because of ambari error: mysql-connector-java.jar due to HTTP error: HTTP Error 404: Not Found</h2><p>Ambari Server:(Ref: <a href="https://discuss.pivotal.io/hc/en-us/articles/115001611807-Hive-Services-Fail-to-Start-giving-Error-HTTP-Error-404-Not-Found-" target="_blank">https://discuss.pivotal.io/hc/en-us/articles/115001611807-Hive-Services-Fail-to-Start-giving-Error-HTTP-Error-404-Not-Found-</a> )</p><pre><code class="lang-shell">sudo yum install mysql-connector-java*
# ubunbu&#xC758; &#xACBD;&#xC6B0; &#xB2E4;&#xB978; namenode &#xC5D0;&#xC11C; &#xCE74;&#xD53C;&#xD574;&#xC11C; &#xC544;&#xB798;&#xC640; &#xAC19;&#xC774; &#xC9C4;&#xD589;&#xD568;....
ls -al /usr/share/java/mysql-connector-java.jar
cd /var/lib/ambari-server/resources/
ln -s /usr/share/java/mysql-connector-java.jar mysql-connector-java.jar</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="ambari-agent-install.html" class="navigation navigation-prev " aria-label="Previous page: Ambari Agent 설치">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../etc/programming-3-law.html" class="navigation navigation-next " aria-label="Next page: 프로그래밍 관련 원칙">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Ambari 설치 중 이슈 정리","level":"7.2","depth":1,"next":{"title":"프로그래밍 관련 원칙","level":"8.1","depth":1,"path":"etc/programming-3-law.md","ref":"etc/programming-3-law.md","articles":[]},"previous":{"title":"Ambari Agent 설치","level":"7.1","depth":1,"path":"hdp/ambari-agent-install.md","ref":"hdp/ambari-agent-install.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"hdp/ambari-install-issue.md","mtime":"2019-11-29T14:52:04.133Z","type":"markdown"},"gitbook":{"version":"3.2.0","time":"2020-01-27T14:04:45.351Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

